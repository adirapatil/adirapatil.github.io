<div class="forgot-password-page">
  <div class="forgot-password-container">
    <!-- Background decoration -->
    <div class="bg-decoration">
      <div class="circle circle-1"></div>
      <div class="circle circle-2"></div>
      <div class="circle circle-3"></div>
    </div>

    <!-- Forgot Password Form -->
    <div class="forgot-password-form-container">
      <div class="form-header">
        <a routerLink="/login" class="back-link">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back to Login
        </a>

        <div class="brand">
          <h1>Forgot Password</h1>
          <p>Enter your email address and we'll send you a link to reset your password</p>
        </div>
      </div>

      <!-- Success Message -->
      @if (emailSent) {
        <div class="success-message">
          <div class="success-icon">
            <svg width="48" height="48" viewBox="0 0 24 24">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
          </div>
          <h2>Check Your Email</h2>
          <p>We've sent a password reset link to <strong>{{ forgotForm.get('email')?.value }}</strong></p>
          <p class="email-note">If you don't see the email, check your spam folder.</p>
          <div class="success-actions">
            <button type="button" class="btn btn-secondary" (click)="emailSent = false">
              Try Another Email
            </button>
            <a routerLink="/login" class="btn btn-primary">
              Back to Login
            </a>
          </div>
        </div>
      }

      <!-- Forgot Password Form -->
      @if (!emailSent) {
        <form class="forgot-password-form" [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
        <!-- Error Message -->
        @if (error()) {
          <div class="error-message">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            <span>{{ error() }}</span>
            <button type="button" class="error-close" (click)="clearError()">
              <svg width="16" height="16" viewBox="0 0 24 24">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        }

        <div class="form-group">
          <label for="email">Email Address</label>
          <div class="input-wrapper">
            <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="Enter your email address"
              required
              class="form-input"
              [class.error]="formSubmitted && forgotForm.get('email')?.invalid"
            />
          </div>
          @if (formSubmitted && forgotForm.get('email')?.invalid) {
            <div class="validation-error">
              @if (forgotForm.get('email')?.errors?.['required']) {
                <span>Email is required.</span>
              }
              @if (forgotForm.get('email')?.errors?.['email']) {
                <span>Enter a valid email address.</span>
              }
            </div>
          }
        </div>

        <button
          type="submit"
          class="submit-btn"
          [disabled]="isLoading()"
          [class.loading]="isLoading()"
        >
          @if (!isLoading()) {
            <span>Send Reset Link</span>
          }
          @if (isLoading()) {
            <div class="spinner"></div>
          }
        </button>

        <div class="form-footer">
          <p>Remember your password? <a routerLink="/login">Sign in</a></p>
        </div>
      </form>
      }
    </div>
  </div>
</div>
